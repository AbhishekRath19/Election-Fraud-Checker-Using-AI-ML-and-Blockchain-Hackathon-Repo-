{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>Voter Registration</h2>
    <p>Please register with your name and upload a government ID to participate in the election.</p>
    
    <form id="registrationForm" method="POST" enctype="multipart/form-data" action="{{ url_for('auth.register') }}">
        <div class="form-group">
            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        
        <div class="form-group">
            <label for="id_image">Government ID:</label>
            <input type="file" id="id_image" name="id_image" accept="image/*" required>
            <small>Upload a clear photo of your government-issued ID (PNG, JPG, JPEG, GIF)</small>
        </div>
        
        <button type="submit">Register to Vote</button>
    </form>
</div>

<script>
document.getElementById('registrationForm').addEventListener('submit', function(e) {
    const fileInput = document.getElementById('id_image');
    const file = fileInput.files[0];
    
    if (file) {
        const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
        const maxSize = 5 * 1024 * 1024; // 5MB
        
        if (!allowedTypes.includes(file.type)) {
            e.preventDefault();
            alert('Please upload a valid image file (JPEG, PNG, GIF)');
            return;
        }
        
        if (file.size > maxSize) {
            e.preventDefault();
            alert('File size exceeds 5MB limit. Please upload a smaller file.');
            return;
        }
    }
});
</script>
{% endblock %}